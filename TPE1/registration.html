<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<link rel="stylesheet" type="text/css" href="css/registrationPage.css">
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<link rel="stylesheet" type="text/css" href="css/navbar.css">
		<link rel="stylesheet" type="text/css" href="css/header.css">
		<link rel="stylesheet" type="text/css" href="css/jquery-ui-1.8.11.custom.css">
		<link rel="stylesheet" type="text/css" href="css/categories.css">
		<link rel="stylesheet" type="text/css" href="css/Base.css">
		<link rel="stylesheet" type="text/css" href="css/BreadCrumb.css">
		<link rel="stylesheet" type="text/css" href="css/footer.css">
		<script type="text/javascript" src="./libs/init.js"></script>
		<script type="text/javascript" src="./libs/jquery-1.5.1.min.js"></script>
		<script type="text/javascript" src="./libs/jquery.easing.1.3.js"></script>
		<script type="text/javascript" src="./libs/jquery.jBreadCrumb.1.1.js"></script>
		<script type="text/javascript" src="./libs/jquery.cookie.js"></script>
		<script type="text/javascript" src="./libs/jquery-ui-1.8.11.custom.min.js"></script>
		<script type="text/javascript" src="./libs/ServerManager.js"></script>
		<script type="text/javascript" src="./libs/i18n.js"></script>
		<script type="text/javascript" src="./libs/validator.js"></script>
		<script type="text/javascript" src="./libs/userManager.js"></script>
		<script type="text/javascript" src="libs/login.js"></script>
		<script type="text/javascript">
			$(function() {
				
				$("#breadcrumb").jBreadCrumb();
				
				var translator = new i18n('Index');
				document.getElementById('locale').value = translator.getLang();
				
				$(document).keydown(function(e) {
					if (e.keyCode == 27) {
						if ($('.loginform').is(':visible') === true) {
							$('.loginform').hide();
						}
					}
				});
				
				$('.logintext').click(function() {
					if ($('.loginform').is(':visible') === false) {
						$('#loginimg').css("background-position", "0 -16px");
					} else {
						$('#loginimg').css("background-position", "-64px -16px");
					}
					$('.loginform').slideToggle();
				});
				
			
				$('#registrationInformation').submit(function(e) {
					e.preventDefault();
					var validations = [
						{
							e: '#email',
							re: /^[\w\d_-]+@[\w\d_-]+\.[\w]+$/,
							min: 1,
							max: 180,
							errorm: "Mail has to be in the format great@example.com"
						},
						{
							e: '#username',
							re: /^[\w\d_-]+$/,
							min: 1,
							max: 15,
							errorm: "Username can contain only characters or digits. Max: 15"
						},
						{
							e: '#password',
							re: /^[\w\d_-]+$/,
							min: 8,
							max: 15,
							errorm: "Password can contain only characters or digits. Min: 8. Max: 15"
						},
						{
							e: '#name',
							re: /^[\w ]+$/,
							min: 1,
							max: 80,
							errorm: "Maximum length of name is 80 characters and contain only letters or spaces"
						},
						{
							e: '#birthDate',
							re: /^(19|20)\d\d-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/,
							min: 1,
							max: 11,
							errorm: "Date format: yyyy-mm-dd"
						}
					];
					$('form input').each(function() {
						if ($(this).attr('type') !== 'submit' && $(this).attr('type') !== 'button') {
							removeErrorContainer($(this));
							if ($(this).val() === '') {
								createErrorContainer($(this), "Required");
							}
						}
					});
					for (var i = 0; i < validations.length; i++) {
						validate(validations[i]);
					}
					if (!document.getElementsByClassName('error').length) {
						createUser($('form input'));
					}
					return false;
				});
				
				$("#locale").change(function() {
					translator.setLang($(this).val());
					translator.translatePage();
				});
				
				$('#searchbutton').click(function() {
					if ($('#searchtext').val() != '') {
						window.location = 'browse.html?searchText=' + $('#searchtext').val();
					}
				});
				
				$('#searchtext').keydown(function(e) {
					if (e.keyCode === 13) {
						$('#searchbutton').click();
					}
				});
				loadUserSesion();
				$('#loginbutton').click(function() {
					logIn($('#usernameInput').val(), $('#passwordInput').val());
				});
				translator.translatePage();
			});
		</script>
		
		<title>Carritus Co.</title>
	</head>
	<body>
		<div class="header">
			<img src="images/cooltext530131064.png" alt="Company Logo" width="276" height="110">
			<h1 id='header'>Happy Business</h1>
			<div id="localization">
			</div>
			<div id="login">
				<div class="logintext">
					<div id="loginimg"></div>
					<span id="logintext" class="i18n"></span>
				</div>
				<div class="loginform">
				</div>
			</div>
			<div class="navbar">
				<div id="breadcrumbholder" class="breadCrumbHolder breadCrumbPosition breadCrumb module">
					<ul id="breadcrumb">
						<li><a href="index.html">Home</a></li>
						<li><a href="#">Settings</a></li>
						<li><a href="#">Checkout</a></li>
					</ul>
				</div>
				<div id="searchbar">
					<input id="searchtext" class="i18n" value="Search" onfocus="if(!this._haschanged){this.value=''};this._haschanged=true;">
					<button id="searchbutton" class="ui-widget">Go</button>
				</div>
			</div>
		</div>
		
		<div id="mainArea">
			<div class='shoppingCart'>
			</div>
			<div class="fieldsRegistration">
				<h1>Registration</h1>
				<h2>Please enter the required information (all fields are required)</h2>
				<form id='registrationInformation' action='#'>
					<div class='fieldRow'>
						<span id='registerUserName' class='i18n'>Username:</span>
						<input id='username' type='text'></input>
					</div>
					<div class='fieldRow'>
						<span id='registerFullName' class='i18n'>Full name:</span>
						<input id='name' type='text'></input>
					</div>
					<div class='fieldRow'>
						<span id='registerPassword' class='i18n'>Password:</span>
						<input id='password' type='password'></input>
					</div>
					<div class='fieldRow'>
						<span id='registerEmail' class='i18n'>Email:</span>
						<input id='email' type='text'></input>
					</div>							
					<div class='fieldRow'>
						<span id='registerBirthDate' class='i18n'>Birth date:</span>
						<input id='birthDate' type='text'></input>
					</div>
					<input id='registerButton' type="submit" value='Register'> </input>
					<input id='cancelButton' type="button" value='Cancel'></input>
				</form>
			</div>
			<div class ="footer">
				<a id="usLabel" class="" href="#">About us</a> | <a id="contactLabel" class="" href="#">Contact</a>
			</div>
		</div>
	</body>
</html>
